{{! damage-display.hbs }}
<div class="damage-section">
    {{!-- 1. Black Arrow Header --}}
    <div class="damage-header-container">
        <div class="damage-header-arrow" title="{{damage.formula}}">
            <span>
                {{#if (eq damage.typeKey "healing")}}
                    {{localize "VAGABOND.UI.Sections.Healing"}}
                {{else if (eq damage.typeKey "recover")}}
                    {{localize "VAGABOND.UI.Sections.Recovery"}}
                {{else if (eq damage.typeKey "recharge")}}
                    {{localize "VAGABOND.UI.Sections.Recharge"}}
                {{else}}
                    {{localize "VAGABOND.UI.Sections.Damage"}}
                {{/if}}
            </span>
        </div>
        {{#if damage.isCritical}}
        <div class="crit-label">{{localize "VAGABOND.Item.Spell.FIELDS.crit.label"}}!</div>
        {{/if}}
    </div>

    {{!-- 2. Damage Row --}}
    <div class="damage-row">
        {{!-- Total Amount with Type Icon Background --}}
        <div class="damage-total-display">
            
            {{!-- FIX: Use dynamic icon class, fallback to burst if missing --}}
            <i class="{{#if damage.iconClass}}{{damage.iconClass}}{{else}}fas fa-burst{{/if}} damage-bg-icon"></i>
            <div class="damage-value">{{damage.total}}</div>
        </div>

        {{!-- Dice Icons --}}
        <div class="damage-dice-list">
             {{{damage.diceDisplay}}}
        </div>
    </div>
</div>