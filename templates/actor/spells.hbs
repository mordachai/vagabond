{{! Spells Tab - Magic and Spellcasting }}
<section
  class='tab spells scrollable {{tab.cssClass}}'
  data-group='primary'
  data-tab='spells'
>
  {{! Magic Section }}
  <section class='magic-section'>
    {{!-- <h2 class='panel-title'>{{localize "VAGABOND.UI.Sections.Magic"}}</h2> --}}
    {{! Mana Info Row }}
    <div class='mana-info-row'>
      <div class='mana-field'>
        <label class='resource-label clickable mana-modifier' data-mana-action='modify' data-tooltip='Left click to spend mana, Right click to restore mana'>{{localize "VAGABOND.Actor.Character.FIELDS.mana.current.label"}}</label>
        <input
          class='mana-value'
          type='text'
          name='system.mana.current'
          value='{{system.mana.current}}'
          data-dtype='Number'
          {{#unless @root.editable}}disabled{{/unless}}
        />
      </div>
      <div class='mana-field'>
        <label class='resource-label'>{{localize "VAGABOND.Actor.Character.FIELDS.mana.max.label"}}</label>
        <span class='mana-value'>{{system.mana.max}}</span>
      </div>
      <div class='mana-field'>
        <label class='resource-label'>{{localize "VAGABOND.Actor.Character.FIELDS.mana.castingMax.label"}}</label>
        <span class='mana-value'>{{system.mana.castingMax}}</span>
      </div>
    </div>

    <div class='mana-skill-row'>
      <i class="fa-duotone fa-regular fa-wand-magic-sparkles"></i>
      <label class='resource-label'>{{localize "VAGABOND.Actor.Character.FIELDS.manaSkill.label"}}</label>
      <select name="system.attributes.manaSkill" {{#unless @root.editable}}disabled{{/unless}}>
        {{selectOptions @root.config.skills selected=system.attributes.manaSkill blank="" localize=true}}
      </select>
    </div>

    {{! Spells List }}
    <h4 class='spells-title'>
      {{localize "VAGABOND.UI.Sections.Spells"}}
      {{!-- {{#if @root.editable}}
        <i
          class='fas fa-plus clickable'
          data-tooltip='Create New Spell'
          data-action='createDoc'
          data-document-class='Item'
          data-type='spell'
        ></i>
      {{/if}} --}}
    </h4>
    <ol class='items-list'>
      {{!-- <li class='item flexrow items-header'>
        <div class='item-name spell-col-name'>{{localize "VAGABOND.UI.Sections.Name"}}</div>
        <div class='item-damage spell-col-damage'>{{localize "VAGABOND.UI.Sections.Damage"}}</div>
        <div class='spell-col-favorite' data-tooltip='{{localize "VAGABOND.UI.Sections.Favorite"}}'>F</div>
        <div class='item-controls spell-col-controls' data-tooltip='Actions'>
          <i class='fas fa-cog'></i>
        </div>
      </li> --}}
      {{#each spells as |spell|}}
        <li
          class='item flexrow draggable spell-item-row'
          data-item-id='{{spell._id}}'
          data-document-id='{{spell._id}}'
          data-document-class='Item'
        >
          <div class='item-name spell-col-name'>
            <div class='item-image clickable' data-action='viewDoc'>
              <img
                src='{{spell.img}}'
                data-tooltip='{{spell.name}}'
                width='40'
                height='40'
              />
            </div>
            <div data-action='viewDoc'>{{spell.name}}</div>
          </div>
          <div class='item-damage item-prop spell-col-damage'>
            {{#unless (eq spell.system.damageType '-')}}
              {{localize (lookup @root.config.damageTypes spell.system.damageType)}}
            {{else}}
              â€”
            {{/unless}}
          </div>
          <div class='spell-col-favorite' data-action='toggleSpellFavorite' data-item-id='{{spell._id}}'>
            {{#if spell.system.favorite}}
              <i class='clickable fas fa-star favorite-active' data-tooltip='Favorite (click to unfavorite)'></i>
            {{else}}
              <i class='clickable far fa-star favorite-inactive' data-tooltip='Not Favorite (click to favorite)'></i>
            {{/if}}
          </div>
          <div class='item-controls spell-col-controls'>
            <i class='clickable fas fa-comment' data-action='useItem' data-item-id='{{spell._id}}' data-tooltip='Send spell to chat'></i>
            {{#if @root.editable}}
              <i class='clickable fas fa-trash' data-action='deleteDoc' data-document-class='Item' data-document-id='{{spell._id}}' data-tooltip='Delete spell'></i>
            {{/if}}
          </div>
        </li>
      {{else}}
        <li class='no-spells'>
          No spells yet. {{#if @root.editable}}Click the + button above to add a spell.{{/if}}
        </li>
      {{/each}}
    </ol>
  </section>
</section>
